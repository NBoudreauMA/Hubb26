<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hubbardston Budget Portal - Expenditures</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: url('hubbardston_bg.jpg') no-repeat center center fixed;
            background-size: cover;
            color: white;
        }
        
        nav {
            background: linear-gradient(90deg, rgba(34, 139, 34, 0.9), rgba(0, 100, 0, 0.9));
            padding: 15px;
            text-align: center;
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        nav a {
            color: white;
            margin: 0 20px;
            text-decoration: none;
            font-size: 22px;
            font-weight: bold;
            text-transform: uppercase;
            transition: 0.3s ease-in-out;
        }

        nav a:hover {
            text-decoration: underline;
            transform: scale(1.2);
            color: white;
            background-color: rgba(0, 100, 0, 0.7);
            border-radius: 5px;
        }
        
        nav a.active {
            color: white;
            text-decoration: underline;
            background-color: rgba(0, 100, 0, 0.7);
            padding: 8px 15px;
            border-radius: 5px;
        }
        
        .container {
            max-width: 1200px;
            margin: 120px auto 40px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.75);
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
        }
        
        .content-section {
            margin-bottom: 40px;
            transition: 0.4s ease-in-out;
            padding: 20px;
            border-radius: 10px;
            background: rgba(20, 20, 20, 0.5);
        }
        
        .content-section:hover {
            transform: scale(1.01);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        }
        
        h2 {
            color: #4bc0c0;
            text-align: center;
            margin-bottom: 30px;
            font-size: 32px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        /* Expenditures Header */
        .expenditures-header {
            background: linear-gradient(135deg, rgba(0, 60, 30, 0.85), rgba(0, 90, 70, 0.75));
            border-radius: 12px;
            padding: 35px 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-left: 4px solid #4bc0c0;
            margin: 35px 0;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }
        
        .expenditures-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(75, 192, 192, 0.1), transparent 60%);
            z-index: 0;
        }
        
        .expenditures-title {
            color: #4bc0c0;
            text-align: center;
            font-size: 34px;
            margin-bottom: 28px;
            font-weight: 600;
            text-transform: none;
            letter-spacing: 0;
            position: relative;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .expenditures-content {
            color: white;
            font-size: 17px;
            line-height: 1.8;
            position: relative;
        }
        
        .expenditures-content p {
            margin-bottom: 22px;
            opacity: 0.95;
        }
        
        .highlight-number {
            color: #4bc0c0;
            font-weight: 600;
            position: relative;
            padding: 0 2px;
        }
        
        .highlight-number::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 1px;
            background-color: rgba(75, 192, 192, 0.4);
        }
        
        /* Charts Section */
        .charts-section {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 40px;
        }
        
        .chart-box {
            flex: 1;
            min-width: 45%;
            background: linear-gradient(135deg, rgba(0, 60, 30, 0.85), rgba(0, 90, 70, 0.75));
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-left: 4px solid #4bc0c0;
            position: relative;
            overflow: hidden;
        }
        
        .chart-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(75, 192, 192, 0.1), transparent 60%);
            z-index: 0;
        }
        
        .chart-title {
            color: #4bc0c0;
            font-size: 24px;
            text-align: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
            font-weight: 600;
        }
        
        .chart-display {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            height: 300px;
        }
        
        /* Department Details */
        .department-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }
        
        .department-card {
            background: linear-gradient(135deg, rgba(0, 60, 30, 0.85), rgba(0, 90, 70, 0.75));
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            border-left: 4px solid #4bc0c0;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .department-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25);
        }
        
        .department-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(75, 192, 192, 0.1), transparent 70%);
            z-index: 0;
        }
        
        .department-title {
            color: #4bc0c0;
            font-size: 22px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .department-amount {
            font-size: 26px;
            font-weight: 600;
            color: white;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .department-text {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }
        
        /* Chart Legend Styling */
        .chart-legend {
            margin-top: 25px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            position: relative;
            z-index: 1;
        }
        
        .legend-item {
            display: grid;
            grid-template-columns: 24px 1fr auto auto;
            gap: 15px;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 6px;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .legend-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .legend-item:hover {
            background: rgba(75, 192, 192, 0.1);
            transform: translateX(5px);
        }
        
        .legend-color {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }
        
        .legend-text {
            color: white;
            font-weight: 500;
            font-size: 16px;
        }
        
        .legend-value {
            color: #ffffff;
            text-align: right;
            font-size: 15px;
        }
        
        .legend-percent {
            color: #4bc0c0;
            text-align: right;
            font-weight: 600;
            width: 60px;
            font-size: 15px;
        }
        
        /* Download Button */
        .button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0 20px;
            flex-wrap: wrap;
        }
        
        .download-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: rgba(0, 140, 110, 0.7);
            color: white;
            text-decoration: none;
            padding: 14px 22px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        .download-button:hover {
            background: rgba(0, 160, 130, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }
        
        .download-button:active {
            transform: translateY(1px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .button-icon {
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }
        
        .download-button:hover .button-icon {
            transform: translateY(-2px);
        }
        
        /* Budget Comparison */
        .budget-comparison {
            margin-top: 50px;
            background: linear-gradient(135deg, rgba(0, 60, 30, 0.85), rgba(0, 90, 70, 0.75));
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-left: 4px solid #4bc0c0;
            position: relative;
        }
        
        .budget-comparison::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(75, 192, 192, 0.1), transparent 60%);
            z-index: 0;
        }
        
        .comparison-title {
            color: #4bc0c0;
            font-size: 24px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            font-weight: 600;
        }
        
        .comparison-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            position: relative;
        }
        
        .comparison-card {
            flex: 1;
            min-width: 200px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .year-label {
            color: #4bc0c0;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .amount-label {
            font-size: 24px;
            color: white;
            margin-bottom: 5px;
        }
        
        .change-label {
            font-size: 16px;
            color: #2ecc71;
            font-weight: 500;
        }
        
        .change-label.negative {
            color: #e74c3c;
        }
        
        /* Responsive Design */
        @media (max-width: 900px) {
            .charts-section, 
            .department-grid,
            .comparison-container {
                flex-direction: column;
            }
            
            .chart-box, 
            .department-card {
                min-width: 100%;
            }
            
            .expenditures-header,
            .chart-box,
            .department-card {
                padding: 25px 20px;
            }
            
            .expenditures-title {
                font-size: 28px;
            }
            
            nav a {
                font-size: 16px;
                margin: 0 10px;
            }
            
            .chart-display {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">HOME</a>
        <a href="revenue.html">REVENUE</a>
        <a href="expenditures.html" class="active">EXPENDITURES</a>
        <a href="capital_plan.html">CAPITAL PLAN</a>
        <a href="citizens_guide.html">CITIZEN'S GUIDE</a>
    </nav>
    
    <div class="container">
        <div class="content-section">
            <h2>FY26 Expenditures Analysis</h2>
            
            <div class="expenditures-header">
                <h3 class="expenditures-title">Expenditures Overview</h3>
                
                <div class="expenditures-content">
                    <p>The FY26 budget reflects Hubbardston's commitment to responsible fiscal management while addressing key community needs. Total expenditures for FY26 amount to <span class="highlight-number">$11,851,233</span>, representing a carefully planned 6.32% increase over the previous fiscal year.</p>
                    
                    <p>This budget prioritizes education, public safety, and infrastructure while maintaining essential services across all departments. Strategic investments in key areas will enable improvements in service delivery while maintaining long-term fiscal sustainability.</p>
                </div>
            </div>
            
            <!-- Expenditures Chart Section -->
            <div class="charts-section">
                <div class="chart-box">
                    <h3 class="chart-title">Expenditures By Department</h3>
                    <div class="chart-display">
                        <canvas id="departmentChart"></canvas>
                    </div>
                    
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #3498db;"></div>
                            <div class="legend-text">Education</div>
                            <div class="legend-value">$7,334,563</div>
                            <div class="legend-percent">61.9%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #e74c3c;"></div>
                            <div class="legend-text">Public Safety</div>
                            <div class="legend-value">$1,595,193</div>
                            <div class="legend-percent">13.5%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #9b59b6;"></div>
                            <div class="legend-text">Liabilities & Assessments</div>
                            <div class="legend-value">$999,455</div>
                            <div class="legend-percent">8.4%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #1abc9c;"></div>
                            <div class="legend-text">Public Works</div>
                            <div class="legend-value">$920,184</div>
                            <div class="legend-percent">7.8%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #f1c40f;"></div>
                            <div class="legend-text">General Government</div>
                            <div class="legend-value">$724,886</div>
                            <div class="legend-percent">6.1%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #e67e22;"></div>
                            <div class="legend-text">Debt Service</div>
                            <div class="legend-value">$146,862</div>
                            <div class="legend-percent">1.2%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #00bcd4;"></div>
                            <div class="legend-text">Culture & Recreation</div>
                            <div class="legend-value">$94,290</div>
                            <div class="legend-percent">0.8%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #ff80ab;"></div>
                            <div class="legend-text">Human Services</div>
                            <div class="legend-value">$26,950</div>
                            <div class="legend-percent">0.2%</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-box">
                    <h3 class="chart-title">Year-Over-Year Changes</h3>
                    <div class="chart-display">
                        <canvas id="changesChart"></canvas>
                    </div>
                    
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #3498db;"></div>
                            <div class="legend-text">Education</div>
                            <div class="legend-value">+$412,325</div>
                            <div class="legend-percent">+5.9%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #e74c3c;"></div>
                            <div class="legend-text">Public Safety</div>
                            <div class="legend-value">+$124,560</div>
                            <div class="legend-percent">+8.5%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #9b59b6;"></div>
                            <div class="legend-text">Liabilities & Assessments</div>
                            <div class="legend-value">+$72,440</div>
                            <div class="legend-percent">+7.8%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #1abc9c;"></div>
                            <div class="legend-text">Public Works</div>
                            <div class="legend-value">+$56,210</div>
                            <div class="legend-percent">+6.5%</div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #f1c40f;"></div>
                            <div class="legend-text">General Government</div>
                            <div class="legend-value">+$38,820</div>
                            <div class="legend-percent">+5.7%</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Department Details -->
            <div class="department-grid">
                <div class="department-card">
                    <h3 class="department-title">Education</h3>
                    <div class="department-amount">$7,334,563</div>
                    <p class="department-text">Our largest expenditure category supports the Quabbin Regional School District, covering educational services, operations, and special education requirements. The FY26 budget includes funding for educational programming, maintenance, and the district assessment.</p>
                </div>
                
                <div class="department-card">
                    <h3 class="department-title">Public Safety</h3>
                    <div class="department-amount">$1,595,193</div>
                    <p class="department-text">Includes funding for Police and Fire Departments, Emergency Management, and Animal Control. The FY26 increases support equipment upgrades, training, and staffing adjustments to ensure adequate emergency response capabilities.</p>
                </div>
                
                <div class="department-card">
                    <h3 class="department-title">Liabilities & Assessments</h3>
                    <div class="department-amount">$999,455</div>
                    <p class="department-text">Covers employee benefits, insurance, and other municipal liabilities. This category includes health insurance, retirement contributions, and other post-employment benefits (OPEB) funding to address long-term obligations.</p>
                </div>
                
                <div class="department-card">
                    <h3 class="department-title">Public Works</h3>
                    <div class="department-amount">$920,184</div>
                    <p class="department-text">Funds road maintenance, snow removal, equipment maintenance, and other infrastructure needs. The FY26 budget includes increased investments in road repair materials and equipment replacements.</p>
                </div>
            </div>
            
            <!-- Budget Comparison -->
            <div class="budget-comparison">
                <h3 class="comparison-title">Budget Comparison: FY25 vs. FY26</h3>
                
                <div class="comparison-container">
                    <div class="comparison-card">
                        <div class="year-label">FY25 Budget</div>
                        <div class="amount-label">$11,146,879</div>
                    </div>
                    
                    <div class="comparison-card">
                        <div class="year-label">FY26 Budget</div>
                        <div class="amount-label">$11,851,233</div>
                        <div class="change-label">+6.32%</div>
                    </div>
                    
                    <div class="comparison-card">
                        <div class="year-label">Net Increase</div>
                        <div class="amount-label">$704,354</div>
                    </div>
                </div>
            </div>
            
            <!-- Download Buttons -->
            <div class="button-container">
                <a href="expenditures_detail.pdf" target="_blank" class="download-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="button-icon">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    Download Detailed Report
                </a>
                
                <a href="budget_spreadsheet.xlsx" target="_blank" class="download-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="button-icon">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="9" y1="3" x2="9" y2="21"></line>
                        <line x1="15" y1="3" x2="15" y2="21"></line>
                        <line x1="3" y1="9" x2="21" y2="9"></line>
                        <line x1="3" y1="15" x2="21" y2="15"></line>
                    </svg>
                    Download Budget Spreadsheet
                </a>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Department Expenditures Chart
            const deptCtx = document.getElementById('departmentChart').getContext('2d');
            new Chart(deptCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Education', 'Public Safety', 'Liabilities & Assessments', 'Public Works', 'General Government', 'Debt Service', 'Culture & Recreation', 'Human Services'],
                    datasets: [{
                        data: [7334563, 1595193, 999455, 920184, 724886, 146862, 94290, 26950],
                        backgroundColor: [
                            '#3498db', '#e74c3c', '#9b59b6', '#1abc9c', 
                            '#f1c40f', '#e67e22', '#00bcd4', '#ff80ab'
                        ],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.raw;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total * 100) * 10) / 10;
                                    const formattedValue = new Intl.NumberFormat('en-US', {
                                        style: 'currency',
                                        currency: 'USD',
                                        maximumFractionDigits: 0
                                    }).format(value);
                                    return `${context.label}: ${formattedValue} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    cutout: '60%',
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
            
            // Year-over-Year Changes Chart
            const changesCtx = document.getElementById('changesChart').getContext('2d');
            new Chart(changesCtx, {
                type: 'bar',
                data: {
                    labels: ['Education', 'Public Safety', 'Liabilities', 'Public Works', 'General Gov'],
                    datasets: [{
                        label: 'FY26 Increase',
                        data: [412325, 124560, 72440, 56210, 38820],
                        backgroundColor: [
                            '#3498db', '#e74c3c', '#9b59b6', '#1abc9c', '#f1c40f'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#ffffff',
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#ffffff'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false},
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.raw;
                                    const formattedValue = new Intl.NumberFormat('en-US', {
                                        style: 'currency',
                                        currency: 'USD',
                                        maximumFractionDigits: 0
                                    }).format(value);
                                    return `Increase: ${formattedValue}`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true
                    }
                }
            });
        });
    </script>
</body>
</html>
